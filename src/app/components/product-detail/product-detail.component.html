<div class="container py-5" *ngIf="product">
  <div class="row">
    <!-- Product Images -->
    <div class="col-lg-6">
      <div class="product-images">
        <div class="main-image mb-3">
          <img [src]="product.images[0]" 
               [alt]="product.name" 
               class="img-fluid rounded shadow">
        </div>
        <div class="thumbnail-images d-flex gap-2">
          <img *ngFor="let image of product.images.slice(0, 4)" 
               [src]="image" 
               [alt]="product.name"
               class="img-thumbnail cursor-pointer"
               style="width: 80px; height: 80px; object-fit: cover;">
        </div>
      </div>
    </div>

    <!-- Product Info -->
    <div class="col-lg-6">
      <div class="product-info">
        <h1 class="product-title mb-3">{{ product.name }}</h1>
        
        <!-- Price -->
        <div class="price-section mb-4">
          <span class="price h3 text-primary fw-bold">
            ${{ product.price | number:'1.2-2' }}
          </span>
          <span class="ms-3 badge bg-success" *ngIf="product.stock > 0">
            {{ product.stock }} in stock
          </span>
          <span class="ms-3 badge bg-danger" *ngIf="product.stock === 0">
            Out of stock
          </span>
        </div>

        <!-- Description -->
        <div class="description mb-4">
          <p class="text-muted">{{ product.description }}</p>
        </div>

        <!-- Features -->
        <div class="features mb-4">
          <h5 class="mb-3">Key Features</h5>
          <ul class="list-unstyled">
            <li *ngFor="let feature of product.features" class="mb-2">
              <i class="fas fa-check text-success me-2"></i>
              {{ feature }}
            </li>
          </ul>
        </div>

        <!-- Quantity & Add to Cart -->
        <div class="add-to-cart mb-4" *ngIf="product.stock > 0">
          <div class="row align-items-center">
            <div class="col-auto">
              <label class="form-label fw-bold">Quantity:</label>
            </div>
            <div class="col-auto">
              <div class="input-group" style="width: 120px;">
                <button class="btn btn-outline-secondary" 
                        type="button" 
                        (click)="decrementQuantity()">
                  <i class="fas fa-minus"></i>
                </button>
                <input type="number" 
                       class="form-control text-center" 
                       [(ngModel)]="quantity"
                       min="1" 
                       [max]="product.stock">
                <button class="btn btn-outline-secondary" 
                        type="button" 
                        (click)="incrementQuantity()">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>
            <div class="col">
              <button class="btn btn-primary btn-lg" (click)="addToCart()">
                <i class="fas fa-cart-plus me-2"></i>
                Add to Cart
              </button>
            </div>
          </div>
        </div>

        <!-- Product Details -->
        <div class="product-details">
          <div class="row g-3">
            <div class="col-6">
              <div class="detail-item">
                <strong>Category:</strong>
                <span class="ms-2">{{ product.category }}</span>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-item">
                <strong>SKU:</strong>
                <span class="ms-2">{{ product.id }}</span>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-item">
                <strong>Stock:</strong>
                <span class="ms-2">{{ product.stock }} units</span>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-item">
                <strong>Weight:</strong>
                <span class="ms-2">0.5 kg</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Product Specifications -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-info-circle me-2"></i>
            Product Specifications
          </h5>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <table class="table table-borderless">
                <tbody>
                  <tr>
                    <td class="fw-bold">Material:</td>
                    <td>Premium Quality</td>
                  </tr>
                  <tr>
                    <td class="fw-bold">Dimensions:</td>
                    <td>15cm x 10cm x 5cm</td>
                  </tr>
                  <tr>
                    <td class="fw-bold">Capacity:</td>
                    <td>360ml</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-md-6">
              <table class="table table-borderless">
                <tbody>
                  <tr>
                    <td class="fw-bold">Packaging:</td>
                    <td>Eco-friendly</td>
                  </tr>
                  <tr>
                    <td class="fw-bold">Certification:</td>
                    <td>ISO 9001</td>
                  </tr>
                  <tr>
                    <td class="fw-bold">Warranty:</td>
                    <td>1 Year</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Related Products -->
  <div class="row mt-5" *ngIf="relatedProducts.length > 0">
    <div class="col-12">
      <h4 class="mb-4">Related Products</h4>
      <div class="row g-4">
        <div class="col-lg-3 col-md-6" *ngFor="let relatedProduct of relatedProducts">
          <div class="card product-card h-100">
            <div class="position-relative">
              <img [src]="relatedProduct.images[0]" 
                   [alt]="relatedProduct.name" 
                   class="card-img-top">
              <div class="position-absolute top-0 end-0 p-2">
                <span class="badge bg-success" *ngIf="relatedProduct.stock > 0">
                  {{ relatedProduct.stock }} in stock
                </span>
                <span class="badge bg-danger" *ngIf="relatedProduct.stock === 0">
                  Out of stock
                </span>
              </div>
            </div>
            
            <div class="card-body d-flex flex-column">
              <h6 class="card-title">{{ relatedProduct.name }}</h6>
              <p class="card-text text-muted small flex-grow-1">
                {{ relatedProduct.description.substring(0, 80) }}...
              </p>
              <div class="d-flex justify-content-between align-items-center mt-auto">
                <span class="price">${{ relatedProduct.price | number:'1.2-2' }}</span>
                <a [routerLink]="['/product', relatedProduct.id]" 
                   class="btn btn-primary btn-sm">
                  View
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="container py-5 text-center" *ngIf="!product">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3 text-muted">Loading product details...</p>
</div>
